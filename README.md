# 基于摄像头的面部表情识别

该项目利用计算机视觉和深度学习技术，从摄像头实时获取的画面中识别面部表情。它能够分析情绪、统计相关数据，并生成带有情绪分布可视化图表的报告。

## 目录
- [依赖](#依赖)
- [安装](#安装)
- [使用方法](#使用方法)
- [文件说明](#文件说明)
- [工作原理](#工作原理)
- [贡献](#贡献)

## 依赖
- Python 3.6 及以上版本
- OpenCV（`cv2`）
- NumPy
- DeepFace
- Matplotlib
- 可用的摄像头（网络摄像头或其他兼容摄像头）

## 安装
1. 克隆本仓库：
   ```bash
   git clone https://github.com/Xijun-bit/shibie.git
   cd shibie
   ```
2. 安装所需的软件包：
   ```bash
   pip install opencv-python numpy deepface matplotlib
   ```

## 使用方法
1. 运行脚本：
   ```bash
   python 9.1.test3.py
   ```
2. 会打开一个窗口，显示带有实时面部表情分析的摄像头画面。
3. 按下 `q` 键退出程序并生成报告。
4. 按下 `r` 键重置情绪统计数据。

## 文件说明
- `9.1.test3.py`：包含面部表情识别和分析代码的主 Python 脚本。
- `facial_expression_model_weights.h5`：DeepFace 用于情绪检测的预训练模型权重文件。
- `README.md`：本文件，为项目提供文档说明。

## 工作原理
1. **摄像头初始化**：脚本尝试不同的摄像头后端来初始化摄像头以进行视频捕获。
2. **情绪分析**：利用 DeepFace 库，对来自摄像头的每一帧画面进行分析，检测面部表情并确定主要情绪。
3. **统计与历史记录**：脚本跟踪检测到的情绪，记录情绪的数量以及带有时间戳的情绪历史。
4. **报告生成**：当程序退出时，会生成文本报告以及显示检测到的情绪分布的饼图（保存为 `emotion_report.png`）。

## 贡献
如果你想要贡献代码，请 fork 本仓库并根据需要进行修改。非常欢迎提交拉取请求。
